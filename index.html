<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>üë®‚Äçüè´ Introdu√ß√£o aos Modelos Lineares</title>
    <meta charset="utf-8" />
    <meta name="author" content="Steven Dutt Ross" />
    <script src="index_files/header-attrs/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="slides-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# üë®‚Äçüè´ Introdu√ß√£o aos Modelos Lineares
## <br> üîó <a href="https://ap.metodosquantitativos.com/">Aula Modelos</a>
### Steven Dutt Ross
### UNIRIO

---


&lt;style type="text/css"&gt;
body {
    background-color: #f7f68f;
    color: #1a5b78;
}

.huge-text {
 font-family: 'Montserrat', sans-serif;
 font-size: 600%;
 font-weight: bold;
 color: var(--monument);
}
.larger { font-size: 400% }
.pull-left {
  float: left;
  width: 47%;
}
.pull-right {
  float: right;
  width: 47%;
}
.pull-right ~ * {
  clear: both;
}

&lt;/style&gt;



  



### Como ajustar uma reta que a esses dados?
![](index_files/figure-html/unnamed-chunk-2-1.png)&lt;!-- --&gt;

---

### Como ajustar uma reta que a esses dados?
![](index_files/figure-html/unnamed-chunk-3-1.png)&lt;!-- --&gt;


---

## Introdu√ß√£o aos Modelos Lineares 

### Representa√ß√£o matem√°tica de um fen√¥meno  
### √â utilizado para descrever rela√ß√µes entre vari√°veis  
&lt;br&gt;
### Modelos Determin√≠sticos  
### Modelos Probabil√≠sticos (Estat√≠sticos)  

---

## Introdu√ß√£o aos Modelos Lineares 

### Modelo Estat√≠stico
Extra√ß√£o de sinal na presen√ßa de ru√≠dos  
- a transmiss√£o e recep√ß√£o de informa√ß√µes pode ser decomposta em sinal e ru√≠do  
&lt;br&gt;
#### Sinal  
- componente determin√≠stico, n√£o aleat√≥rio  
&lt;br&gt;
#### Ru√≠do  
- componente aleat√≥rio

---

## Modelo Estat√≠stico

Resume as principais caracter√≠sticas de um conjunto de dados, substituindo seus valores individuais por fun√ß√µes matem√°ticas. &lt;br&gt;
&lt;br&gt;
Representa a informa√ß√£o atrav√©s de um n√∫mero restrito de quantidades/vari√°veis (par√¢metros).

---

## Modelo Estat√≠stico

### A interpreta√ß√£o/resumo das informa√ß√µes de um conjunto de dados demanda a formula√ß√£o e identifica√ß√£o de padr√µes que possam representar as informa√ß√µes.

### Busca-se evidenciar suas principais caracter√≠sticas, utilizando um n√∫mero restrito de vari√°veis/quantidades.

---

## Modelo Determin√≠stico
### Representa rela√ß√µes exatas

Exemplo: &lt;br&gt;
‚Äì Rela√ß√£o entre for√ßa, massa e acelera√ß√£o &lt;br&gt;
‚Äì F = m¬∑a &lt;br&gt;
 &lt;br&gt;
  &lt;br&gt;
‚Äì Rela√ß√£o entre velocidade, dist√¢ncia e tempo &lt;br&gt;
‚Äì V = d/t  &lt;br&gt;

---

## Modelo Estat√≠stico

### Considera dois componentes

#### O componente determin√≠stico  
#### O componente aleat√≥rio  

Exemplo:  
‚Äì O volume de vendas √©, em geral, 10 vezes o que se gasta com propaganda...*exatamente?*  

‚Äì Y = 10X + Erro  

‚Äì O erro aleat√≥rio representa a varia√ß√£o nas vendas que n√£o pode ser explicada pela propaganda

---


```
## `geom_smooth()` using formula 'y ~ x'
```

![](index_files/figure-html/unnamed-chunk-4-1.png)&lt;!-- --&gt;

---

# Modelos de Regress√£o
### Qual √© a rela√ß√£o entre as diferentes vari√°veis?  
O Km/l como uma fun√ß√£o do HP.

`$$Km/l_i = f(HP_i)+\epsilon$$`

Em uma rela√ß√£o linear, temos:

`$$Km/l_i = \beta_0+\beta_1*Km/l_i+\epsilon$$`


---
# Modelos de Regress√£o
### Qual √© a rela√ß√£o entre as diferentes vari√°veis?  

### Vari√°vel reposta: uma vari√°vel num√©rica (aleat√≥ria), cujo comportamento (tend√™ncia) deseja-se analisar ou prever

### Vari√°veis explicativas ou independentes: uma ou mais vari√°veis num√©ricas ou categ√≥ricas n√£o estoc√°sticas que se sup√µe sejam relacionadas √† vari√°vel resposta.

`$$Y_i = \beta_0+\beta_1*X_i+\epsilon$$`
---

##  Regress√£o linear: objetivos
* Predizer observa√ß√µes futuras
* Avaliar o efeito as rela√ß√µes da vari√°vel independente (x) sobre uma vari√°vel dependente (y)
* Descrever a estrutura dos dados

---

## Modelo de Regress√£o Linear
`\(Y = \beta_0 + \beta_1 x + \epsilon\)`   

Onde:  
Y = √© o valor a ser predito  
`\(\beta_0\)` = √© o intercepto (valor quando x = 0)  
`\(\beta_1\)` = √© a inclina√ß√£o da reta de regress√£o  
x = √© o valor da vari√°vel preditora (preditor linear)   
`\(\epsilon\)` √© o erro

---

## Como ajustar essa reta aos pontos?
![](index_files/figure-html/unnamed-chunk-5-1.png)&lt;!-- --&gt;

---

![](index_files/figure-html/unnamed-chunk-6-1.png)&lt;!-- --&gt;

---

![](index_files/figure-html/unnamed-chunk-7-1.png)&lt;!-- --&gt;

---

![](index_files/figure-html/unnamed-chunk-8-1.png)&lt;!-- --&gt;

---

![](index_files/figure-html/unnamed-chunk-9-1.png)&lt;!-- --&gt;

---

class: center, middle, inverse


# QUAL A MELHOR RETA?

---

## Como podemos ajustar a reta (dist√¢ncia m√≠nima ao quadrado)?

![](index_files/figure-html/unnamed-chunk-10-1.png)&lt;!-- --&gt;

---

## M√©todo dos M√≠nimos Quadrados

```r
y&lt;-c(10,12,13,15,16,18,19,20,21,22)  
x&lt;-c(1,2,3,4,5,6,7,8,9,10)
mod&lt;-lm(y~x)
mod
```

```
## 
## Call:
## lm(formula = y ~ x)
## 
## Coefficients:
## (Intercept)            x  
##       9.267        1.333
```

```r
Yhat &lt;- predict(mod)
Erro &lt;- c(y - Yhat) # equivalente a residuals(mod)
```

---

Para esse conjunto de dados, as estimativas do `\(\beta_0\)` e do `\(\beta_1\)` desse modelo linear simples s√£o 9.27 e 1.33. Logo a equa√ß√£o fica:

`\(\hat{Y}\)` = 9.27 + 1.33*Xi

Por exemplo, para dado valor de X, √© poss√≠vel obter um valor para Y  &lt;br&gt;
X = 1 -&gt;  `\(\hat{Y}\)` = 9,27+1,33*(1) = 10,6 (como y = 10 o erro √© -0,6)  &lt;br&gt;
&lt;br&gt;
X = 5 -&gt;  `\(\hat{Y}\)` = 9,27+1,33*(5) = 15,932 (como y = 16 o erro √© 0,068)  

---

![](index_files/figure-html/unnamed-chunk-12-1.png)&lt;!-- --&gt;


---


## Tipos de relaciomentos


```r
y&lt;-c(10,11,12,13,14,15,16,17,18,19)
x&lt;-c(1,2,3,4,5,6,7,8,9,10)
y2&lt;-c(10,12,13,15,16,18,19,20,21,22)
x2&lt;-c(1,3,5,6,8,9,6,13,14,20)
y3&lt;-c(9,12,13,15,16,18,19,19,18,15)
x3&lt;-c(1,3,5,6,8,9,6,13,14,20)
y4&lt;-c(10,12,13,10,12,13,14,10,11,12)
x4&lt;-c(1,3,5,6,8,9,6,13,14,20)

par(mfrow=c(2,2))
plot(x,y)
abline(lm(y~x),col="red")
plot(x2,y2)
abline(lm(y2~x2),col="blue")
plot(x3,y3)
abline(lm(y3~x3),col="darkgreen")
plot(x4,y4)
abline(lm(y4~x4),col="gray")
```

---

![](index_files/figure-html/unnamed-chunk-14-1.png)&lt;!-- --&gt;


---

## M√©todos dos M√≠nimos Quadrados


```r
anova(mod)
```

```
## Analysis of Variance Table
## 
## Response: y
##           Df  Sum Sq Mean Sq F value    Pr(&gt;F)    
## x          1 146.667 146.667  676.92 5.113e-09 ***
## Residuals  8   1.733   0.217                      
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
```


---

## M√©todos dos M√≠nimos Quadrados


```r
summary(mod)
```

```
## 
## Call:
## lm(formula = y ~ x)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.60000 -0.26667  0.06667  0.31667  0.73333 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  9.26667    0.31798   29.14 2.08e-09 ***
## x            1.33333    0.05125   26.02 5.11e-09 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.4655 on 8 degrees of freedom
## Multiple R-squared:  0.9883,	Adjusted R-squared:  0.9869 
## F-statistic: 676.9 on 1 and 8 DF,  p-value: 5.113e-09
```

---



```r
fit &lt;- lm(Kmporlitro ~ HP, data = CARROS)  # Fit the model
summary(fit)  # Report the results
```

```
## 
## Call:
## lm(formula = Kmporlitro ~ HP, data = CARROS)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -5.7121 -2.1122 -0.8854  1.5819  8.2360 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 30.09886    1.63392  18.421  &lt; 2e-16 ***
## HP          -0.06823    0.01012  -6.742 1.79e-07 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 3.863 on 30 degrees of freedom
## Multiple R-squared:  0.6024,	Adjusted R-squared:  0.5892 
## F-statistic: 45.46 on 1 and 30 DF,  p-value: 1.788e-07
```

---


```r
CARROS$predicted &lt;- predict(fit)   # Save the predicted values
CARROS$residuals &lt;- residuals(fit) # Save the residual values
CARROS %&gt;% select(Kmporlitro, predicted, residuals) %&gt;% head()
```

```
##                   Kmporlitro predicted  residuals
## Mazda RX4               21.0  22.59375 -1.5937500
## Mazda RX4 Wag           21.0  22.59375 -1.5937500
## Datsun 710              22.8  23.75363 -0.9536307
## Hornet 4 Drive          21.4  22.59375 -1.1937500
## Hornet Sportabout       18.7  18.15891  0.5410881
## Valiant                 18.1  22.93489 -4.8348913
```

---


```r
confint(fit, level=0.95) # intervalo de confianca dos parametros do modelo
```

```
##                   2.5 %     97.5 %
## (Intercept) 26.76194879 33.4357723
## HP          -0.08889465 -0.0475619
```

```r
fitted(fit) # valores ajustados
```

```
##           Mazda RX4       Mazda RX4 Wag          Datsun 710      Hornet 4 Drive 
##           22.593750           22.593750           23.753631           22.593750 
##   Hornet Sportabout             Valiant          Duster 360           Merc 240D 
##           18.158912           22.934891           13.382932           25.868707 
##            Merc 230            Merc 280           Merc 280C          Merc 450SE 
##           23.617174           21.706782           21.706782           17.817770 
##          Merc 450SL         Merc 450SLC  Cadillac Fleetwood Lincoln Continental 
##           17.817770           17.817770           16.112064           15.429781 
##   Chrysler Imperial            Fiat 128         Honda Civic      Toyota Corolla 
##           14.406357           25.595794           26.550990           25.664022 
##       Toyota Corona    Dodge Challenger         AMC Javelin          Camaro Z28 
##           23.480718           19.864619           19.864619           13.382932 
##    Pontiac Firebird           Fiat X1-9       Porsche 914-2        Lotus Europa 
##           18.158912           25.595794           23.890087           22.389065 
##      Ford Pantera L        Ferrari Dino       Maserati Bora          Volvo 142E 
##           12.086595           18.158912            7.242387           22.661978
```

---

## Modelo de regress√£o: exemplo 1

```r
y = c(110, 120, 90, 70, 50, 80, 40, 40, 50, 30)
xx = 1:10
modelo = lm(y ~ xx)
modelo
```

```
## 
## Call:
## lm(formula = y ~ xx)
## 
## Coefficients:
## (Intercept)           xx  
##     118.667       -9.212
```

---

## Modelo de regress√£o: exemplo 1

```r
plot(y ~ xx)
abline(modelo, col=2, lty=2, lwd=2)
legend("top", legend=c("valores observados", "valores ajustados"), lty=c(NA,2), col=c(1,2), lwd=1:2, bty="n", pch=c(1,NA))
```

![](index_files/figure-html/Reg0-1.png)&lt;!-- --&gt;

---

## Modelo de regress√£o: exemplo 2

```r
renda = c(1750, 1680, 1700, 1710, 1690, 1650, 1650, 1600, 1800, 1860)
anosdeestudo = c(8, 7, 6, 6, 6, 5, 5, 5, 8, 9)
modelo2 = lm(renda ~ anosdeestudo)
```

---


```r
plot(renda ~ anosdeestudo)
abline(modelo2, col=2, lty=2, lwd=2)
legend("topleft", legend=c("valores observados", "valores ajustados"), lty=c(NA,2), col=c(1,2), lwd=1:2, bty="n", pch=c(1,NA))
```

![](index_files/figure-html/Reg21-1.png)&lt;!-- --&gt;

```r
modelo2
```

```
## 
## Call:
## lm(formula = renda ~ anosdeestudo)
## 
## Coefficients:
##  (Intercept)  anosdeestudo  
##      1387.51         49.46
```

---

## Modelo de regress√£o: exemplo 3

```r
data("mtcars")
modelo3 = lm(mpg ~ wt, data=mtcars)
modelo3
```

```
## 
## Call:
## lm(formula = mpg ~ wt, data = mtcars)
## 
## Coefficients:
## (Intercept)           wt  
##      37.285       -5.344
```

---


```r
plot(mtcars$mpg ~ mtcars$wt)
abline(modelo3, col=2, lty=2, lwd=2)
legend("topright", legend=c("valores observados", "valores ajustados"), lty=c(NA,2), col=c(1,2), lwd=1:2, bty="n", pch=c(1,NA))
```

![](index_files/figure-html/Reg31-1.png)&lt;!-- --&gt;

---

## Modelo de regress√£o: exemplo 4

```r
modelo4 = lm(mpg ~ wt+cyl+disp+hp, data=mtcars)
modelo4
```

```
## 
## Call:
## lm(formula = mpg ~ wt + cyl + disp + hp, data = mtcars)
## 
## Coefficients:
## (Intercept)           wt          cyl         disp           hp  
##    40.82854     -3.85390     -1.29332      0.01160     -0.02054
```

---


```r
par(mfrow = c(2, 2))
plot(mtcars$mpg ~ mtcars$wt)
plot(mtcars$mpg ~ mtcars$cyl)
plot(mtcars$mpg ~ mtcars$disp)
plot(mtcars$mpg ~ mtcars$hp)
```

![](index_files/figure-html/Reg5-1.png)&lt;!-- --&gt;


---

class: middle

.pull-left[
  .huge-text[check point]
]
.pull-right[  
  .larger[  

at√© aqui, tudo ok?



  ]
]


---
class: inverse, center, middle


#Visualizando o Modelo

---


```r
ggplot(CARROS, aes(x = HP, y = Kmporlitro)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE, color = "red") +  # Plot regression slope
  theme_bw()  # Add theme for cleaner look
```

```
## `geom_smooth()` using formula 'y ~ x'
```

![](index_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;

---


```r
ggplot(CARROS, aes(x = HP, y = Kmporlitro)) +
  geom_smooth(method = "lm", se = FALSE, color = "red") +  # Plot regression slope
  geom_segment(aes(xend = HP, yend = predicted), alpha = .2) +  # alpha to fade lines
  geom_point() +
  geom_point(aes(y = predicted), shape = 1) +
  theme_bw()  # Add theme for cleaner look
```

```
## `geom_smooth()` using formula 'y ~ x'
```

![](index_files/figure-html/unnamed-chunk-22-1.png)&lt;!-- --&gt;

---


```r
ggplot(CARROS, aes(x = HP, y = Kmporlitro)) +
  geom_smooth(method = "lm", se = FALSE, color = "lightgrey") +
  geom_segment(aes(xend = HP, yend = predicted), alpha = .2) +
  geom_point(aes(color = abs(residuals), size = abs(residuals))) + # size also mapped
  scale_color_continuous(low = "black", high = "red") +
  guides(color = FALSE, size = FALSE) +  # Size legend also removed
  geom_point(aes(y = predicted), shape = 1) +
  theme_bw()
```

```
## `geom_smooth()` using formula 'y ~ x'
```

![](index_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;

---
class: inverse, center, middle

# Regress√£o M√∫ltipla

---

# Regress√£o M√∫ltipla

Queremos ajustar o modelo de minimos quadrados (MQO) com mais de uma vari√°vel explicativa. 

Por exemplo:

`$$KmporLitro = \beta_0+\beta_1*HP+\beta_2*Peso+\epsilon$$`

`$$KmporLitro = \beta_0+\beta_1*HP+\beta_2*Peso+\beta_3*TipodeMarcha +\beta_4 Tipodecombustivel+\epsilon$$`
 
O modelo 1 tem duas vari√°veis explicativas.  
O modelo 2 tem quatro vari√°veis explicativas.

Tr√™s perguntas:   
1) como fazer esses modelos?  
2) qual deles tem o melhor ajuste?    
3) como interpretar o coeficiente beta?  

---


```r
### Regressao linear Multipla
modelo1 = lm(Kmporlitro ~ HP + Peso , data=CARROS)
modelo2 = lm(Kmporlitro ~ HP + Peso + TipodeMarcha, data=CARROS)
modelo_geral = lm(Kmporlitro ~ HP + Peso + TipodeMarcha + Tipodecombustivel, data=CARROS)

summary(modelo1)
summary(modelo2)
summary(modelo_geral)
```

---


```r
### Regressao linear Multipla
modelo1 = lm(Kmporlitro ~ HP + Peso , data=CARROS)
modelo2 = lm(Kmporlitro ~ HP + Peso + TipodeMarcha + Tipodecombustivel, data=CARROS)
modelo_geral = lm(Kmporlitro ~ HP + Peso + TipodeMarcha + Tipodecombustivel + NumdeValvulas + NumdeMarchas + RPM + Cilindros, data=CARROS)

summary(modelo1)
```

```
## 
## Call:
## lm(formula = Kmporlitro ~ HP + Peso, data = CARROS)
## 
## Residuals:
##    Min     1Q Median     3Q    Max 
## -3.941 -1.600 -0.182  1.050  5.854 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 37.22727    1.59879  23.285  &lt; 2e-16 ***
## HP          -0.03177    0.00903  -3.519  0.00145 ** 
## Peso        -3.87783    0.63273  -6.129 1.12e-06 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 2.593 on 29 degrees of freedom
## Multiple R-squared:  0.8268,	Adjusted R-squared:  0.8148 
## F-statistic: 69.21 on 2 and 29 DF,  p-value: 9.109e-12
```

```r
#summary(modelo2)
#summary(modelo_geral)
```

---

# R2 e R2 ajustado


```r
summary(modelo1)$r.squared 
```

```
## [1] 0.8267855
```

```r
summary(modelo2)$r.squared 
```

```
## [1] 0.8499499
```

```r
summary(modelo_geral)$r.squared 
```

```
## [1] 0.8634989
```

```r
summary(modelo1)$adj.r.squared 
```

```
## [1] 0.8148396
```

```r
summary(modelo2)$adj.r.squared 
```

```
## [1] 0.8277202
```

```r
summary(modelo_geral)$adj.r.squared 
```

```
## [1] 0.8160203
```

---

# R2 e Akaike information criterion (AIC)

```r
summary(modelo1)$adj.r.squared 
```

```
## [1] 0.8148396
```

```r
summary(modelo2)$adj.r.squared 
```

```
## [1] 0.8277202
```

```r
summary(modelo_geral)$adj.r.squared 
```

```
## [1] 0.8160203
```

```r
AIC(modelo1)
```

```
## [1] 156.6523
```

```r
AIC(modelo2)
```

```
## [1] 156.0584
```

```r
AIC(modelo_geral)
```

```
## [1] 161.03
```

---

### Sele√ß√£o de modelo (vari√°veis) via STEPWISE

```r
library(MASS)
step &lt;- stepAIC(modelo_geral, direction="both") # quanto menor o AIC mais parcimonioso o modelo
```

```
## Start:  AIC=68.22
## Kmporlitro ~ HP + Peso + TipodeMarcha + Tipodecombustivel + NumdeValvulas + 
##     NumdeMarchas + RPM + Cilindros
## 
##                     Df Sum of Sq    RSS    AIC
## - Cilindros          1     0.019 153.73 66.222
## - Tipodecombustivel  1     0.053 153.76 66.229
## - NumdeMarchas       1     2.122 155.83 66.657
## - HP                 1     3.610 157.32 66.961
## - RPM                1     5.822 159.53 67.408
## - NumdeValvulas      1     5.976 159.68 67.439
## &lt;none&gt;                           153.71 68.218
## - TipodeMarcha       1    12.047 165.75 68.633
## - Peso               1    35.865 189.57 72.929
## 
## Step:  AIC=66.22
## Kmporlitro ~ HP + Peso + TipodeMarcha + Tipodecombustivel + NumdeValvulas + 
##     NumdeMarchas + RPM
## 
##                     Df Sum of Sq    RSS    AIC
## - Tipodecombustivel  1     0.094 153.82 64.241
## - NumdeMarchas       1     2.665 156.39 64.772
## - HP                 1     4.636 158.36 65.173
## - NumdeValvulas      1     5.997 159.72 65.447
## - RPM                1     7.065 160.79 65.660
## &lt;none&gt;                           153.73 66.222
## - TipodeMarcha       1    13.907 167.63 66.993
## + Cilindros          1     0.019 153.71 68.218
## - Peso               1    37.519 191.25 71.210
## 
## Step:  AIC=64.24
## Kmporlitro ~ HP + Peso + TipodeMarcha + NumdeValvulas + NumdeMarchas + 
##     RPM
## 
##                     Df Sum of Sq    RSS    AIC
## - NumdeMarchas       1     3.019 156.84 62.864
## - HP                 1     4.544 158.36 63.173
## - NumdeValvulas      1     6.075 159.90 63.481
## &lt;none&gt;                           153.82 64.241
## - TipodeMarcha       1    13.815 167.63 64.994
## - RPM                1    14.025 167.84 65.034
## + Tipodecombustivel  1     0.094 153.73 66.222
## + Cilindros          1     0.060 153.76 66.229
## - Peso               1    44.840 198.66 70.428
## 
## Step:  AIC=62.86
## Kmporlitro ~ HP + Peso + TipodeMarcha + NumdeValvulas + RPM
## 
##                     Df Sum of Sq    RSS    AIC
## - NumdeValvulas      1     3.227 160.07 61.515
## - HP                 1     4.411 161.25 61.751
## &lt;none&gt;                           156.84 62.864
## + NumdeMarchas       1     3.019 153.82 64.241
## - RPM                1    18.086 174.93 64.356
## + Cilindros          1     0.929 155.91 64.673
## + Tipodecombustivel  1     0.448 156.39 64.772
## - TipodeMarcha       1    29.194 186.03 66.326
## - Peso               1    66.734 223.57 72.208
## 
## Step:  AIC=61.52
## Kmporlitro ~ HP + Peso + TipodeMarcha + RPM
## 
##                     Df Sum of Sq    RSS    AIC
## - HP                 1     9.219 169.29 61.307
## &lt;none&gt;                           160.07 61.515
## + NumdeValvulas      1     3.227 156.84 62.864
## - RPM                1    20.225 180.29 63.323
## + Cilindros          1     0.249 159.82 63.465
## + Tipodecombustivel  1     0.249 159.82 63.466
## + NumdeMarchas       1     0.171 159.90 63.481
## - TipodeMarcha       1    25.993 186.06 64.331
## - Peso               1    78.494 238.56 72.284
## 
## Step:  AIC=61.31
## Kmporlitro ~ Peso + TipodeMarcha + RPM
## 
##                     Df Sum of Sq    RSS    AIC
## &lt;none&gt;                           169.29 61.307
## + HP                 1     9.219 160.07 61.515
## + NumdeValvulas      1     8.036 161.25 61.751
## + Cilindros          1     1.501 167.78 63.022
## + NumdeMarchas       1     0.123 169.16 63.284
## + Tipodecombustivel  1     0.000 169.29 63.307
## - TipodeMarcha       1    26.178 195.46 63.908
## - RPM                1   109.034 278.32 75.217
## - Peso               1   183.347 352.63 82.790
```

```r
step$anova # display results 
```

```
## Stepwise Model Path 
## Analysis of Deviance Table
## 
## Initial Model:
## Kmporlitro ~ HP + Peso + TipodeMarcha + Tipodecombustivel + NumdeValvulas + 
##     NumdeMarchas + RPM + Cilindros
## 
## Final Model:
## Kmporlitro ~ Peso + TipodeMarcha + RPM
## 
## 
##                  Step Df   Deviance Resid. Df Resid. Dev      AIC
## 1                                          23   153.7067 68.21792
## 2         - Cilindros  1 0.01928577        24   153.7259 66.22194
## 3 - Tipodecombustivel  1 0.09391889        25   153.8199 64.24148
## 4      - NumdeMarchas  1 3.01940929        26   156.8393 62.86354
## 5     - NumdeValvulas  1 3.22719028        27   160.0665 61.51530
## 6                - HP  1 9.21946935        28   169.2859 61.30730
```

---

# ANOVA

```r
m1 &lt;- aov(CARROS$Kmporlitro ~ as.factor(CARROS$NumdeValvulas))
summary(m1)
layout(matrix(c(1,2,3,4),2,2)) # optional layout
plot(m1) # diagnostic plots
TukeyHSD(m1)
plot(TukeyHSD(m1)) # where fit comes from aov() 
```


---

# ANOVA

```r
m1 &lt;- aov(CARROS$Kmporlitro ~ as.factor(CARROS$Cilindros) + CARROS$TipodeMarcha)
summary(m1)
layout(matrix(c(1,2,3,4),2,2)) # optional layout
plot(m1) # diagnostic plots
TukeyHSD(m1)
plot(TukeyHSD(m1)) # where fit comes from aov() 
```


---
class: center, middle


[Continua√ß√£o](https://dataunirio.github.io/Regressao_Diagnostico/#1)
&lt;!--
background-position: 50% 50%
class: center, top, inverse
class: center, middle, inverse
class: center, bottom, inverse
--&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "solarized-light",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9",
"slideNumberFormat": "<div class=\"progress-bar-container\">\n  <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">\n  </div>\n</div>"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
